- í¬íŒ…
    
    # DingDing í”„ë¡œì íŠ¸ í¬íŒ… ë©”ë‰´ì–¼
    
    ## ëª©ì°¨
    
    1. ì‚¬ìš© ë„êµ¬
    2. ê°œë°œ ë„êµ¬
    3. ê°œë°œ í™˜ê²½
    4. í™˜ê²½ ë³€ìˆ˜
    5. CI/CD êµ¬ì¶• ë° ì‹¤í–‰
    6. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì‚¬ìš©
    
    ---
    
    ## 1. ì‚¬ìš© ë„êµ¬
    
    - **í˜•ìƒ ê´€ë¦¬**
        - Gitlab
        - Git
    - **ì»¤ë®¤ë‹ˆì¼€ì´ì…˜**
        - Notion
        - MatterMost
    - **ì™€ì´ì–´í”„ë ˆì„**
        - Figma
    - **ì´ìŠˆ ê´€ë¦¬**
        - Jira
    - **CI/CD**
        - Docker
        - Dockerhub
        - Jenkins
        - Docker-compose
    
    ---
    
    ## 2. ê°œë°œ ë„êµ¬
    
    - **IntelliJ IDEA**: 2023.3.8
    - **Visual Studio Code**: 1.97.2
    
    ---
    
    ## 3. ê°œë°œ í™˜ê²½
    
    ### OS
    
    - **Ubuntu**: 22.04.5
    
    ### BackEnd
    
    - **Java OpenJDK**: **17.0.14**
    - **Spring Boot**: 3.4.3
    - **Spring Security**: 6.3.1.1
    - **Spring Data JPA**: 3.4.2
    - **Gradle**: 8.12.1
    - **JWT**: 0.11.5
    - **Python**Â 3.11.9
    - **FastAPI** 0.115.12
    - **uvicorn** 0.34.0
    - **websockets** 15.0.1
    
    ### FrontEnd
    
    - **TypeScript (ES6+)**
    - **Node.js**: 22.13.10
    - **React**: 19.0.0
    - **Vite**: 6.2.0
    - **Axios**: 1.8.2
    - **Tailwind CSS**: 3.4.17
    - **Framer Motion**: 12.6.2
    - **Zustand (State Management)**: 5.0.3
    - **Recoil (State Management)**: 0.7.7
    - **React Hook Form**: 7.54.2
    - **React Router DOM**: 7.3.0
    - **React Webcam**: 7.2.0
    - **React Icons**: 5.5.0
    - **Lucide React**: 0.483.0
    - **Charting Libraries**
        - **Recharts**: 2.15.1
        - **@nivo/line**: 0.88.0
    - **Three.js & 3D**
        - **Three**: 0.174.0
        - **@react-three/fiber**: 9.1.0
        - **@react-three/drei**: 10.0.5
        - **@types/three**: 0.174.0
    - **TensorFlow.js (AI ëª¨ë¸)**: 4.22.0
    - **Meyda (ì˜¤ë””ì˜¤ ë¶„ì„)**: 5.6.3
    - **Validation**
        - **Zod**: 3.24.2
    - **Date Utility**
        - **date-fns**: 4.1.0
    - **JWT ë””ì½”ë”©**: jwt-decode 4.0.0
    - **React Query**: @tanstack/react-query 5.70.0
    - **Headless UI**: @headlessui/react 2.2.0
    - **UUID ìƒì„±**: uuid 11.1.0
    
    ### Database
    
    - **MySQL :**  8.2.0
    - **AWS S3**
    - **IndexDB**
    
    ### Infra
    
    - **AWS EC2**
    - **Gitlab Webhook**
    - **Docker**: 26.1.3
    - **Docker-compose**: 2.24.1
    - **Jenkins**: 2.479.3
    - **Nginx**: 1.18.0
    - **Certbot**: 1.21.0
    
    ### í¬íŠ¸ ì •ë³´
    
    - **BackEnd**: 8090
    - **FrontEnd**: 80
    - **Jenkins**: 8080
    - **FastAPI**: 8000
    - **MySQL**: 3306
    
    ---
    
    ## 4. í™˜ê²½ ë³€ìˆ˜
    
    ### application.yml
    
    ```yaml
    spring:
      profiles:
        active: dev
      datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://mysql:3306/ddingga?createDatabaseIfNotExist=true&useSSL=false&useUnicode=true&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true
        username: ${MYSQL_USERNAME}
        password: ${MYSQL_PASSWORD}
        hikari:
          maximum-pool-size: 10
          minimum-idle: 5
          idle-timeout: 30000
          max-lifetime: 600000
          connection-timeout: 30000
          leak-detection-threshold: 30000 # 30ì´ˆ ì´ìƒ ì ìœ ë˜ë©´ ë¡œê·¸ë¡œ ì°í˜
      application:
        name: ddingga
      jpa:
        properties:
          hibernate:
            format_sql: "true"
            dialect: org.hibernate.dialect.MySQLDialect
        show-sql: "true"
        hibernate:
          ddl-auto: update
      # ë ˆë””ìŠ¤ ì„¤ì • jedis ë°©ì‹ì€ ë™ê¸°ì²˜ë¦¬ lettuce ë°©ì‹ì€ ë¹„ë™ê¸° ì²˜ë¦¬
      data:
        redis:
          host: redis
          port: 6379
          password: ${REDIS_PASSWORD} #ë°”ê¾¸ì§€ë§ˆì…ˆ
          client-type: lettuce
          lettuce:
            pool:
              max-active: 10
              max-wait: 1000
              max-idle: 10
              min-idle: 1
      # íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ ì„¤ì •
      servlet:
        multipart:
          max-file-size: 100MB
          max-request-size: 100MB
          enabled: true
      # AWS S3 ì„¤ì •
      cloud:
        aws:
          s3:
            bucket: ddingga
          region:
            static: ap-northeast-2
          credentials:
            access-key: ${AWS_S3_ACCESS_KEY}
            secret-key: ${AWS_S3_SECRET_KEY}
    
    jwt:
      # JWT í† í° ìƒì„± ë° ê²€ì¦ì— ì‚¬ìš©ë˜ëŠ” ë¹„ë°€í‚¤
      # ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥
      secret: ${JWT_SECRET}
      # Access Token ìœ íš¨ê¸°ê°„ (1ì‹œê°„)
      # ì§§ì€ ì‹œê°„ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë³´ì•ˆì„± ê°•í™”
      access-token-expiration: 86400
      # Refresh Token ìœ íš¨ê¸°ê°„ (7ì¼)
      # Access Tokenë³´ë‹¤ ê¸´ ì‹œê°„ìœ¼ë¡œ ì„¤ì •
      refresh-token-expiration: 604800
      # JWT í† í° ì ‘ë‘ì‚¬
      # Authorization í—¤ë”ì—ì„œ í† í°ì„ ì‹ë³„í•˜ëŠ”ë° ì‚¬ìš©
      token-prefix: "Bearer "
      # HTTP ìš”ì²­ í—¤ë”ì—ì„œ JWT í† í°ì„ ì „ë‹¬í•˜ëŠ” í—¤ë” ì´ë¦„
      header-string: "Authorization"
    
    server:
      port: 8090
    
    springdoc:
      swagger-ui:
        persist-authorization: true
    
    ```
    
    ### application-prod.yml
    
    (ë°°í¬ ì „ìš© íŒŒì¼)
    
    ```yaml
    spring:
      profiles:
        active: dev
      datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://mysql:3306/ddingga?createDatabaseIfNotExist=true&useSSL=false&useUnicode=true&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true
        username: ${MYSQL_USERNAME}
        password: ${MYSQL_PASSWORD}
        hikari:
          maximum-pool-size: 10
          minimum-idle: 5
          idle-timeout: 30000
          max-lifetime: 600000
          connection-timeout: 30000
          leak-detection-threshold: 30000 # 30ì´ˆ ì´ìƒ ì ìœ ë˜ë©´ ë¡œê·¸ë¡œ ì°í˜
      application:
        name: ddingga
      jpa:
        properties:
          hibernate:
            format_sql: "true"
            dialect: org.hibernate.dialect.MySQLDialect
        show-sql: "true"
        hibernate:
          ddl-auto: update
      # ë ˆë””ìŠ¤ ì„¤ì • jedis ë°©ì‹ì€ ë™ê¸°ì²˜ë¦¬ lettuce ë°©ì‹ì€ ë¹„ë™ê¸° ì²˜ë¦¬
      data:
        redis:
          host: redis
          port: 6379
          password: ${REDIS_PASSWORD} #ë°”ê¾¸ì§€ë§ˆì…ˆ
          client-type: lettuce
          lettuce:
            pool:
              max-active: 10
              max-wait: 1000
              max-idle: 10
              min-idle: 1
      # íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ ì„¤ì •
      servlet:
        multipart:
          max-file-size: 100MB
          max-request-size: 100MB
          enabled: true
      # AWS S3 ì„¤ì •
      cloud:
        aws:
          s3:
            bucket: ddingga
          region:
            static: ap-northeast-2
          credentials:
            access-key: ${AWS_S3_ACCESS_KEY}
            secret-key: ${AWS_S3_SECRET_KEY}
    
    jwt:
      # JWT í† í° ìƒì„± ë° ê²€ì¦ì— ì‚¬ìš©ë˜ëŠ” ë¹„ë°€í‚¤
      # ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥
      secret: ${JWT_SECRET}
      # Access Token ìœ íš¨ê¸°ê°„ (1ì‹œê°„)
      # ì§§ì€ ì‹œê°„ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë³´ì•ˆì„± ê°•í™”
      access-token-expiration: 86400
      # Refresh Token ìœ íš¨ê¸°ê°„ (7ì¼)
      # Access Tokenë³´ë‹¤ ê¸´ ì‹œê°„ìœ¼ë¡œ ì„¤ì •
      refresh-token-expiration: 604800
      # JWT í† í° ì ‘ë‘ì‚¬
      # Authorization í—¤ë”ì—ì„œ í† í°ì„ ì‹ë³„í•˜ëŠ”ë° ì‚¬ìš©
      token-prefix: "Bearer "
      # HTTP ìš”ì²­ í—¤ë”ì—ì„œ JWT í† í°ì„ ì „ë‹¬í•˜ëŠ” í—¤ë” ì´ë¦„
      header-string: "Authorization"
    
    server:
      port: 8090
    
    springdoc:
      swagger-ui:
        persist-authorization: true
    
    ```
    
    ### 5. CI/CD êµ¬ì¶• ë° ì‹¤í–‰
    
    ---
    
    ### GitLab Webhooks ì„¤ì •
    
    - í•´ë‹¹ ë ˆí¬ì§€í† ë¦¬ ì ‘ì† â†’ ì¢Œì¸¡í•˜ë‹¨ Settings â†’ Webhooks â†’ Add new webhook
        - URL
            - http://j12d105.p.ssafy.io:8181/jenkins/project/GitLab-Jenkins-CICD ë„£ê¸°
        - Secret token
            - jenkins â†’ gitlab ì•¡ì„¸ìŠ¤ url  and  secret token(Generate) í•´ì„œ ë‚˜ì˜¨ ì½”ë“œ ë„£ê¸°
        - Push events
            - Wildcard pattern
                - frontend
        - Enable SSL verification í•´ì œ
        - Test â†’ Push events
        - Status 200 ëœ¬ë‹¤ë©´ OK
        - ì‹¤íŒ¨ì‹œ URL,  Secret token í™•ì¸
    
    ### ê¸°ë³¸ í™˜ê²½ ì„¤ì •
    
    1. **AWS EC2 ì ‘ì†**
        - pem í‚¤ê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì ‘ì†
            
            ```bash
            
            # ì˜ˆì‹œ
            ssh -i J12D105T.pem ubuntu@j12d105.p.ssafy.io
            
            ```
            
    2. **íŒ¨í‚¤ì§€ì—…ë°ì´íŠ¸ ë° ê°œë°œ ë„êµ¬ ì„¤ì¹˜**
        
        ```bash
        
        sudo apt update
        sudo apt upgrade -y
        sudo apt install -y build-essential
        
        ```
        
    3. **ufw í¬íŠ¸ ì„¤ì •**
        - í˜„ì¬ ìƒíƒœ í™•ì¸: `sudo ufw status`
        - í¬íŠ¸ í—ˆìš©: `sudo ufw allow [í¬íŠ¸ ë²ˆí˜¸]`
            - **[í¬íŠ¸ ë²ˆí˜¸] ëª©ë¡**
                - 22
                - 80
                - 44
                - 8989
                - 8181
                - 8000
                - 5173
                - 8090
                - 8091
                - 18000
                - 6379
                - 3306
                - 443
    
    ### Docker ì„¤ì¹˜
    
    1. **Set up Docker'sÂ `apt`Â repository.**
    
    ```json
    # Add Docker's official GPG key:
    sudo apt-get update
    sudo apt-get install ca-certificates curl
    sudo install -m 0755 -d /etc/apt/keyrings
    sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
    sudo chmod a+r /etc/apt/keyrings/docker.asc
    
    # Add the repository to Apt sources:
    echo \
      "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
      $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
      sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
    sudo apt-get update
    ```
    
    1. **Install the Docker packages.**
    
    ```json
    sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
    ```
    
    1. **Docker pull jenkins** 
    
    ```json
    docker pull jenkins/jenkins:lts
    ```
    
    ### Docker & Docker-compose ì„¤ì¹˜
    
    1. **í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜**
        
        ```bash
        
        sudo apt-get install -y apt-transport-https ca-certificates curl gnupg-agent software-properties-common
        
        ```
        
    2. **Docker GPG í‚¤ ì¶”ê°€ ë° ë ˆí¬ì§€í† ë¦¬ ì¶”ê°€**
        
        ```bash
        
        curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
        sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
        
        ```
        
    3. **Docker ë° Docker-compose ì„¤ì¹˜**
        
        ```bash
        
        sudo apt-get update
        sudo apt-get install -y docker-ce docker-ce-cli containerd.io
        sudo systemctl start docker
        sudo systemctl enable docker
        sudo usermod -aG docker $USER
        sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
        sudo chmod +x /usr/local/bin/docker-compose
        docker --version
        docker-compose --version
        
        ```
        
    4. **Docker í…ŒìŠ¤íŠ¸**
        
        ```bash
        
        docker run hello-world
        ```
        
    5. **Docker Network ì„¤ì¹˜**
        
        ```json
        docker network backend_network
        ```
        
    
    ### docker-compose.yml íŒŒì¼
    
    ```yaml
    version: '3.8'
    
    services:
      mysql:
        image: mysql:8.0
        container_name: mysql
        restart: always
        ports:
          - "3306:3306"
        environment:
          MYSQL_ROOT_PASSWORD: "${MYSQL_PASSWORD}"
          MYSQL_USERNAME: "${MYSQL_USERNAME}"
          MYSQL_PASSWORD: "${MYSQL_PASSWORD}"
        volumes:
          - mysql_data:/var/lib/mysql
        networks:
          - backend_network
        healthcheck:
          test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
          interval: 10s
          retries: 5
          start_period: 20s
        command:
          --slow_query_log=1
          --slow_query_log_file=/var/lib/mysql/mysql-slow.log
          --long_query_time=1
    
      redis:
        image: redis:latest
        container_name: redis
        restart: always
        command: redis-server --requirepass ${REDIS_PASSWORD}
        environment:
          - REDIS_PASSWORD=${REDIS_PASSWORD}
        ports:
          - "6379:6379"
        networks:
          - backend_network
        healthcheck:
          test: ["CMD", "redis-cli", "ping"]
          interval: 10s
          retries: 5
          start_period: 10s
    
      backend-1:
        image: jaeyeolyim/backend-server
        container_name: backend-1
        restart: on-failure
        ports:
          - "8090:8090"
        depends_on:
          mysql:
            condition: service_healthy
          redis:
            condition: service_healthy
        networks:
          - backend_network
        environment:
          - MYSQL_USERNAME=${MYSQL_USERNAME}
          - MYSQL_PASSWORD=${MYSQL_PASSWORD}
          - REDIS_HOST=redis
          - REDIS_PORT=6379
          - REDIS_PASSWORD=${REDIS_PASSWORD}
          - JWT_SECRET=${JWT_SECRET}
          - AWS_S3_ACCESS_KEY=${AWS_S3_ACCESS_KEY}
          - AWS_S3_SECRET_KEY=${AWS_S3_SECRET_KEY}
          - SPRING_PROFILES_ACTIVE=prod
    
      backend-2:
        image: jaeyeolyim/backend-server
        container_name: backend-2
        restart: always
        ports:
          - "8091:8090"
        depends_on:
          mysql:
            condition: service_healthy
          redis:
            condition: service_healthy
        networks:
          - backend_network
        environment:
          - MYSQL_USERNAME=${MYSQL_USERNAME}
          - MYSQL_PASSWORD=${MYSQL_PASSWORD}
          - REDIS_HOST=redis
          - REDIS_PORT=6379
          - REDIS_PASSWORD=${REDIS_PASSWORD}
          - JWT_SECRET=${JWT_SECRET}
          - AWS_S3_ACCESS_KEY=${AWS_S3_ACCESS_KEY}
          - AWS_S3_SECRET_KEY=${AWS_S3_SECRET_KEY}
          - SPRING_PROFILES_ACTIVE=prod
    
      nginx:
        image: jaeyeolyim/frontend-app:latest
        container_name: nginx
        restart: always
        ports:
          - "443:443"
          - "80:80"
          - "15080:15080"
        volumes:
          - /home/ubuntu/j12d105/nginx/nginx.conf:/etc/nginx/nginx.conf
          - /etc/letsencrypt:/etc/letsencrypt
          - /home/ubuntu/j12d105/nginx/frontend.env:/usr/share/nginx/.env
        extra_hosts:
          - "host.docker.internal:host-gateway"
        networks:
          - backend_network
    
    volumes:
      mysql_data:
    
    networks:
      backend_network:
        name: backend_network
        driver: bridge
    ```
    
    ### Dockerfile ì˜ˆì œ
    
    ### BackEnd
    
    ```docker
    FROM openjdk:17-jdk-slim
    WORKDIR /app
    COPY backend/build/libs/*.jar app.jar
    COPY backend/src/main/resources/application.yml application.yml 
    ENTRYPOINT ["java", "-jar", "app.jar", "--spring.config.location=application.yml"]
    
    ```
    
    ### FrontEnd
    
    ```docker
    # Base Image
    FROM node:20-alpine AS build
    
    # Set working directory
    WORKDIR /app
    
    # í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€
    ARG VITE_BASE_URL
    ARG VITE_BACKEND_URL
    ENV VITE_BASE_URL=${VITE_BASE_URL}
    ENV VITE_BACKEND_URL=${VITE_BACKEND_URL}
    
    # Copy package.json and install dependencies
    COPY frontend/tsconfig.json ./tsconfig.json
    COPY frontend/ .  
    COPY frontend/package.json frontend/pnpm-lock.yaml ./
    
    RUN npm install -g pnpm && pnpm install
    
    # í™˜ê²½ ë³€ìˆ˜ í™•ì¸ (ë””ë²„ê¹…ìš©)
    RUN echo "VITE_BASE_URL is set to: $VITE_BASE_URL"
    RUN echo "VITE_BACKEND_URL is set to: $VITE_BACKEND_URL"
    
    # Build the project
    RUN pnpm run build
    
    # Use nginx to serve the build files
    FROM nginx:latest
    
    # Set working directory
    WORKDIR /usr/share/nginx/html
    
    # Remove default nginx content
    RUN rm -rf ./*
    
    # Copy build files from previous stage
    COPY --from=build /app/dist ./
    
    # Copy custom nginx config
    COPY nginx.conf /etc/nginx/nginx.conf
    
    # Expose port 80
    EXPOSE 80
    
    # Start Nginx
    CMD ["nginx", "-g", "daemon off;"]
    
    ```
    
    ### Jenkins ì„¤ì •
    
    1. **Jenkins ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
        
        ```bash
        
        docker run -d \
          --name jenkins \
          --restart=on-failure \
          --network ci_network \
          -p 8181:8080 \
          -p 50000:50000 \
          -v /home/ubuntu/j12d105/jenkins:/var/jenkins_home \
          -v /var/run/docker.sock:/var/run/docker.sock \
          -e JENKINS_OPTS="--prefix=/jenkins" \
          -e TZ=Asia/Seoul \
          jenkins/jenkins:lts
        ```
        
        - ì´ˆê¸° ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ í™•ì¸
            
            ```bash
            
            docker exec jenkins-docker cat /var/jenkins_home/secrets/initialAdminPassword
            
            ```
            
    2. **Jenkins ê¶Œí•œ ì„¤ì •**
        - ubuntu ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥
        
        ```json
        sudo chown -R 1000:1000 /home/ubuntu/j12d105/jenkins
        sudo chmod -R 775 /home/ubuntu/j12d105/jenkins
        ```
        
    3. **Jenkins Docker-CLI ì„¤ì¹˜**
    
    ```json
    docker exec -it -u root jenkins bash
    
    apt update && apt install -y docker.io
    ```
    
    1. **Jenkins ì´ˆê¸° ì„¤ì •**
        - ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ http://j12d105.p.ssafy.io:8181/jenkinsì— ì ‘ì†í•˜ì—¬ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
        - Suggested Plugins ì„¤ì¹˜ í›„, ê´€ë¦¬ì ê³„ì •(ID: admin, password: wjdrlahdla ë“±) ìƒì„±
    2. **Jenkins í™˜ê²½ë³€ìˆ˜ ì„¤ì •**
        - GitLab â†’ GitLab connections
            - Connection name ë€ì— GitLab-Jenkins-connection ì…ë ¥
            - GitLab host URL ë€ì— https://lab.ssafy.com ì…ë ¥
            - Credentials ë€ì— GitLab API token (GitLab-dlawoduf15-Accesstoken)ì…ë ¥
            - Test Connection ëˆŒëŸ¬ë³´ê³  Success ê°€ ëœ¨ë©´ ì„±ê³µ!
            - Save ë²„íŠ¼ í´ë¦­
            - Fail ì¼ì‹œ GitLab API token, GitLab host URL í™•ì¸
    3. **Credentials ë“±ë¡ (Jenkins ê´€ë¦¬ â†’ Credentials)**
        - **GitLab Access Token**
            - GitLabì—ì„œ í† í° ìƒì„± í›„, Jenkins â†’ Credentials â†’ System â†’ Global credentials ì— ë“±ë¡
                - Kind: GitLab API Token, ID: gitlab-token, Description: gitlab access
        - **Username with password**
            - GitLabì—ì„œ í† í° ìƒì„± í›„, Jenkins â†’ Credentials â†’ System â†’ Global credentials ì— ë“±ë¡
        - **EC2 SSH Key ë“±ë¡**
            - Kind: SSH Username with private key, ID: ubuntu-ssh-key, Username: ubuntu, Private Key: (J12D105T.pem)
        - **DockerHub Credentials ë“±ë¡ ë§¤ë‰´ì–¼**
            - Docker Hub : https://hub.docker.com ì ‘ì†
            - ê³„ì • ì •ë³´ ì˜ˆì‹œ
                - **Username : jaeyeolyim**
                - **Password or Access Token :** ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ë„ ê°€ëŠ¥í•˜ì§€ë§Œ, Access Token ê¶Œì¥
            - Access Token ë°œê¸‰ ë°©ë²•
                - Docker Hub ë¡œê·¸ì¸ â†’ ìš°ì¸¡ ìƒë‹¨ â†’ `Account Settings`
                - `Security` â†’ `New Access Token`
                - í† í° ì´ë¦„ ì„¤ì • í›„ ë°œê¸‰ â†’ ë³µì‚¬í•´ì„œ ì €ì¥
            - Jenkinsì— ë“±ë¡í•˜ê¸°
                - ìœ„ì¹˜ : Jenkins â†’ Manage Jenkins â†’ Credentials â†’ (global) or íŠ¹ì • domain â†’ Add Credentials
                
                | í•­ëª© | ê°’ |
                | --- | --- |
                | **Kind** | Username with password |
                | **Username** | Docker Hub ID (ì˜ˆ: `jaeyeolyim`) |
                | **Password** | ë¹„ë°€ë²ˆí˜¸ ë˜ëŠ” ë°œê¸‰ë°›ì€ **Access Token** |
                | **ID** | `docker-hub-credentials` â† ì´ IDë¥¼ Jenkinsfileì—ì„œ ì‚¬ìš© |
                | **Description** | Docker Hub Login for Jenkins push |
        - **MySQL Credentials ë“±ë¡ ë§¤ë‰´ì–¼**
            - MySQL ê³„ì • ì¤€ë¹„
                - ì¼ë°˜ì ìœ¼ë¡œ Docker ì»¨í…Œì´ë„ˆ ë˜ëŠ” EC2 ë‚´ MySQL ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆê³ 
                - ì ‘ì†í•  ê³„ì • ì •ë³´ê°€ ìˆì–´ì•¼ í•¨
            
            | í•­ëª© | ì˜ˆì‹œ ê°’ |
            | --- | --- |
            | **Username** | `root` ë˜ëŠ” `jenkins_user` |
            | **Password** | `your_secure_password` |
            | **Host** | `localhost`, `127.0.0.1`, `mysql`, ë˜ëŠ” ì›ê²© IP ì£¼ì†Œ |
            | **Port** | `3306` (ê¸°ë³¸ê°’) |
            - Jenkinsì— ë“±ë¡ í•˜ê¸°
                - ìœ„ì¹˜:
                    - Jenkins â†’ `Manage Jenkins` â†’ `Credentials`
                    - â†’ `(global)` or íŠ¹ì • domain â†’ `Add Credentials`
                - ë“±ë¡ 1: MySQL Username
                    
                    
                    | í•­ëª© | ê°’ |
                    | --- | --- |
                    | **Kind** | Secret text |
                    | **Secret** | ì˜ˆ: `jenkins_user` |
                    | **ID** | `MySQL-Username` |
                    | **Description** | MySQL ì‚¬ìš©ì ì´ë¦„ (for Jenkins script) |
                - ë“±ë¡ 2: MySQL Password
                    
                    
                    | í•­ëª© | ê°’ |
                    | --- | --- |
                    | **Kind** | Secret text |
                    | **Secret** | ì˜ˆ: `your_secure_password` |
                    | **ID** | `MySQL-Password` |
                    | **Description** | MySQL ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ (for Jenkins script) |
        - **MySQL-Root-Credentials**
            
            
            | í•­ëª© | ê°’ |
            | --- | --- |
            | **Kind** | Secret text |
            | **Secret** | ì˜ˆ: `root:<ë¹„ë°€ë²ˆí˜¸>` ë˜ëŠ” `ë¹„ë°€ë²ˆí˜¸ë§Œ` (ì‚¬ìš© ë°©ì‹ì— ë”°ë¼ ë‹¤ë¦„) |
            | **ID** | `MySQL-Root-Credentials` |
            | **Description** | MySQL ë£¨íŠ¸ ê³„ì • ë¹„ë°€ë²ˆí˜¸ |
        - **JWT_SECRET**
            
            
            | í•­ëª© | ê°’ |
            | --- | --- |
            | **Kind** | Secret text |
            | **Secret** | ì˜ˆ: `my_super_secret_key_1234` |
            | **ID** | `JWT_SECRET` |
            | **Description** | JWT ì•”í˜¸í™”ìš© ì‹œí¬ë¦¿ í‚¤ |
        - **AWS_S3_ACCESS_KEY & AWS_S3_SECRET_KEY**
            
            
            | í•­ëª© | AWS_S3_ACCESS_KEY | AWS_S3_SECRET_KEY |
            | --- | --- | --- |
            | **Kind** | Secret text | Secret text |
            | **Secret** | AWS ì½˜ì†”ì—ì„œ ë°œê¸‰ë°›ì€ Access Key | AWS ì½˜ì†”ì—ì„œ ë°œê¸‰ë°›ì€ Secret Key |
            | **ID** | `AWS_S3_ACCESS_KEY` | `AWS_S3_SECRET_KEY` |
            | **Description** | AWS S3 ì•¡ì„¸ìŠ¤ í‚¤ | AWS S3 ì‹œí¬ë¦¿ í‚¤ |
        - **VITE_BASE_URL**
            
            
            | í•­ëª© | ê°’ |
            | --- | --- |
            | **Kind** | Secret text |
            | **Secret** | ì˜ˆ: `https://yourdomain.com` |
            | **ID** | `VITE_BASE_URL` |
            | **Description** | í”„ë¡ íŠ¸ì—”ë“œì˜ BASE URL (ë„ë©”ì¸ ì£¼ì†Œ)
            ex) https://j12d105.p.ssafy.io |
        - **VITE_BACKEND_URL**
            
            
            | í•­ëª© | ê°’ |
            | --- | --- |
            | **Kind** | Secret text |
            | **Secret** | ì˜ˆ: `https://j12d105.p.ssafy.io/api` |
            | **ID** | `VITE_BACKEND_URL` |
            | **Description** | ë°±ì—”ë“œ API í˜¸ì¶œì„ ìœ„í•œ ì—”ë“œí¬ì¸íŠ¸ ì£¼ì†Œ |
    4. **Pipeline ìƒì„± ë° ì„¤ì •**
        - ì‹ ê·œ Item ìƒì„± â†’ Pipeline
        - **Github project**: í”„ë¡œì íŠ¸ URL ì„¤ì • (ì˜ˆ: https://lab.ssafy.com/xxx/yyy.git)
        - **Trigger ì„¤ì •**: GitLab webhookì„ í†µí•´ Push Events, Merge Request ë“±ì˜ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì‹¤í–‰
            - Push Events, Opened Merge Request Events
            - Approved Merge Requests (EE-only) check
            - Comments check
        - **Pipeline script from SCM**:
            - SCM: Git
            - Repository URL: (í”„ë¡œì íŠ¸ URL)
            - Credentials: GitLab-dlawoduf15-Accesstoken
            - Branch Specifier: */frontend, */backend (ê°ê°ì˜ ë¹Œë“œ ë¶„ë¦¬)
            - Script Path: Jenkinsfile (Jenkinsfile ë‚´ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë¹Œë“œ, ë°°í¬ ì§„í–‰)
    
    ## Jenkinsfile íŒŒì¼ ì˜ˆì‹œ
    
    ### Frontend
    
    ```json
    pipeline {
        agent any
    
        environment {
            IMAGE_NAME = "frontend-app"
            CONTAINER_NAME = "nginx"
            GIT_CREDENTIALS = credentials('dlawoduf15')  // GitLab Credentials
            DOCKER_HUB_CREDENTIALS = credentials('docker-hub-credentials')  // Docker Hub Credentials
            DOCKER_HUB_ID = "jaeyeolyim"  // Docker Hub ì•„ì´ë””
            MATTERMOST_WEBHOOK_URL = 'https://meeting.ssafy.com/hooks/9xbbpnkbqfyo3nzxjrkaib8xbc'  // Mattermost Incoming Webhook URL
            MATTERMOST_CHANNEL = 'd105-jenkins-alarm'  // Mattermost ì±„ë„
        }
    
        stages {
            stage('Checkout') {
                steps {
                    git branch: 'frontend', url: 'https://lab.ssafy.com/s12-ai-image-sub1/S12P21D105.git', credentialsId: 'dlawoduf15'
                    
                    script {  
                        echo "í˜„ì¬ ì²´í¬ì•„ì›ƒ ë¸Œëœì¹˜ í™•ì¸"
                        sh 'git branch'
                    }
                }
            }
    
            stage('Check Git') {
                steps {
                    sh 'git --version || echo "âš ï¸ Gitì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."'
                }
            }
    
            stage('Build Docker Image') {
                steps {
                    script {
                        def startTime = System.currentTimeMillis()
    
                        withCredentials([string(credentialsId: 'GitLab-SecretText-Accesstoken', variable: 'GIT_TOKEN'), 
                        string(credentialsId: 'VITE_BACKEND_URL', variable: 'VITE_BACKEND_URL'),
                        string(credentialsId: 'VITE_BASE_URL', variable: 'VITE_BASE_URL')]) {
                            sh """
                            echo "ğŸ” GitLab Access Tokenì„ .env íŒŒì¼ì— ì €ì¥"
                            echo "GIT_CREDENTIALS=\$GIT_TOKEN" > .env
                            echo "VITE_BASE_URL=\$VITE_BASE_URL" >> .env
                            echo "VITE_BACKEND_URL=\$VITE_BACKEND_URL" >> .env
                            export VITE_BASE_URL=\$VITE_BASE_URL
                            export VITE_BACKEND_URL=\$VITE_BACKEND_URL
    
                            echo "ğŸš€ Docker Image ë¹Œë“œ ì‹œì‘"
                            docker build --build-arg VITE_BASE_URL=\$VITE_BASE_URL --build-arg VITE_BACKEND_URL=\$VITE_BACKEND_URL -t ${IMAGE_NAME} .
                            """
                        }
    
                        def endTime = System.currentTimeMillis()
                        def duration = (endTime - startTime) / 1000 
                        echo "ğŸš€ í”„ë¡ íŠ¸ ë¹Œë“œ ì™„ë£Œ: ${duration}ì´ˆ ì†Œìš”"
                    }
                }
            }
    
            stage('Push to Docker Hub') {
                steps {
                    withCredentials([usernamePassword(credentialsId: 'docker-hub-credentials', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
                        sh '''
                        echo "ğŸ“¦ Docker Hub ë¡œê·¸ì¸ ë° ì´ë¯¸ì§€ í‘¸ì‹œ"
                        echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
    
                        docker tag frontend-app ${DOCKER_HUB_ID}/frontend-app:latest
                        docker push ${DOCKER_HUB_ID}/frontend-app:latest
    
                        docker logout
                        '''
                    }
                }
            }
    
            stage('Deploy (Nginx Only)') {
                steps {
                    sshagent(['ubuntu-ssh-key']) {
                        sh '''
                        ssh -o StrictHostKeyChecking=no ubuntu@j12d105.p.ssafy.io <<- EOF
                            cd /home/ubuntu/j12d105
    
                            echo "ğŸ›‘ ê¸°ì¡´ nginx ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨ & ì‚­ì œ"
                            docker-compose stop nginx || true
                            docker-compose rm -f nginx || true
    
                            echo "ğŸš€ ìµœì‹  í”„ë¡ íŠ¸ì—”ë“œ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°"
                            docker pull ${DOCKER_HUB_ID}/frontend-app:latest
    
                            echo "ğŸš€ nginx ì»¨í…Œì´ë„ˆ ë‹¤ì‹œ ì‹¤í–‰"
                            docker-compose up -d --build nginx
    
                            echo "âœ… nginx + í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ ì™„ë£Œ! í˜„ì¬ ì»¨í…Œì´ë„ˆ ìƒíƒœ:"
                            docker ps -a
    
                            exit 0
                        EOF
                        '''
                    }
                }
            }
        }
    
        post {
            success {
                echo 'âœ… Deployment Successful!'
    
                // GitLab ì»¤ë°‹ ê¸°ë¡ì—ì„œ ë°°í¬í•œ ì‚¬ëŒì˜ GitLab ì•„ì´ë”” ì¶”ì¶œ
                script {
                    def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                    def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                    def Name = Author_ID.substring(1)
    
                    // Mattermost ì•Œë¦¼ ì „ì†¡ (ë¹Œë“œ ì„±ê³µ ì‹œ)
                    mattermostSend(
                        color: 'good',
                        message: "${env.JOB_NAME}ì˜ Jenkins ${env.BUILD_NUMBER}ë²ˆì§¸ ë¹Œë“œê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤! \në°°í¬í•œ ì‚¬ëŒ: ${Name} ã…‹ã…‹ì¢€ì¹˜ë…¸ \në¸Œëœì¹˜: ${env.GIT_BRANCH} \n(<${env.BUILD_URL}|ìƒì„¸ ë³´ê¸°>)",
                        endpoint: "${env.MATTERMOST_WEBHOOK_URL}",
                        channel: "${env.MATTERMOST_CHANNEL}"
                    )
                }
            }
            failure {
                echo 'âŒ Deployment Failed.'
                
                script {
                    // GitLab ì»¤ë°‹ ê¸°ë¡ì—ì„œ ë°°í¬í•œ ì‚¬ëŒì˜ GitLab ì•„ì´ë”” ì¶”ì¶œ
                    def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                    def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                    def Name = Author_ID.substring(1)
    
                    // Mattermost ì•Œë¦¼ ì „ì†¡ (ë¹Œë“œ ì‹¤íŒ¨ ì‹œ)
                    mattermostSend(
                        color: 'danger',
                        message: "${env.JOB_NAME}ì˜ Jenkins ${env.BUILD_NUMBER}ë²ˆì§¸ ë¹Œë“œê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. \në°°í¬í•œ ì‚¬ëŒ: ${Name} ë­í•¨? \n${env.GIT_BRANCH}ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. \n(<${env.BUILD_URL}|ìƒì„¸ ë³´ê¸°>)",
                        endpoint: "${env.MATTERMOST_WEBHOOK_URL}",
                        channel: "${env.MATTERMOST_CHANNEL}"
                    )
                }
            }
        }
    }
    
    ```
    
    ### Backend
    
    ```json
    // backend jenkinsfile
    pipeline {
        agent any
    
        environment {
            COMPOSE_FILE_PATH = "/home/ubuntu/j12d105/docker-compose.yml"
            IMAGE_NAME = "backend-server"
            DOCKER_HUB_ID = "jaeyeolyim"  // Docker Hub ì•„ì´ë””
            MATTERMOST_WEBHOOK_URL = 'https://meeting.ssafy.com/hooks/9xbbpnkbqfyo3nzxjrkaib8xbc'  // Mattermost Incoming Webhook URL
            MATTERMOST_CHANNEL = 'd105-jenkins-alarm'  // Mattermost ì±„ë„
        }
    
        stages {
            stage('Checkout') {
                steps {
                    git branch: 'backend', url: 'https://lab.ssafy.com/s12-ai-image-sub1/S12P21D105.git', credentialsId: 'dlawoduf15'
                }
            }
    
            stage('Build JAR') {
                steps {
                    script {
                        sh '''
                        chmod +x backend/gradlew
                        cd backend
                        ./gradlew clean build --exclude-task test
                        '''
                    }
                }
            }
            stage('Copy application.yml') {
                steps {
                    script {
                        sh '''
                        cp backend/src/main/resources/application.yml backend/build/libs/
                        '''
                    }
                }
            }
            stage('Build Docker Image') {
                steps {
                    script {
                        echo "ğŸš€ Docker ì´ë¯¸ì§€ ë¹Œë“œ ì‹œì‘!"
                        sh "docker build -t ${DOCKER_HUB_ID}/${IMAGE_NAME}:latest -f Dockerfile ."
                    }
                }
            }
    
            stage('Push to Docker Hub') {
                steps {
                    withCredentials([usernamePassword(credentialsId: 'docker-hub-credentials', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
                        sh '''
                        echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
                        docker push ${DOCKER_HUB_ID}/${IMAGE_NAME}:latest
                        docker logout
                        '''
                    }
                }
            }
    
            stage('Deploy (Backend-1, Backend-2, MySQL, Redis)') {
                steps {
                    sshagent(['ubuntu-ssh-key']) {
                        withCredentials([
                            string(credentialsId: 'MySQL-Username', variable: 'MYSQL_USERNAME'),
                            string(credentialsId: 'MySQL-Password', variable: 'MYSQL_PASSWORD'),
                            string(credentialsId: 'REDIS_PASSWORD', variable: 'REDIS_PASSWORD'),
                            string(credentialsId: 'JWT_SECRET', variable: 'JWT_SECRET'),
                            string(credentialsId: 'AWS_S3_ACCESS_KEY', variable: 'AWS_S3_ACCESS_KEY'),
                            string(credentialsId: 'AWS_S3_SECRET_KEY', variable: 'AWS_S3_SECRET_KEY'),
                        ]) {
                            script {
                                sh """
                                ssh -o StrictHostKeyChecking=no ubuntu@j12d105.p.ssafy.io <<- EOF
                                cd /home/ubuntu/j12d105
    
                                echo "ğŸ›‘ ê¸°ì¡´ ë°±ì—”ë“œ, MySQL, Redis ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨ & ì‚­ì œ"
                                docker-compose down
    
                                echo "ğŸš€ ìµœì‹  ë°±ì—”ë“œ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°"
                                docker-compose pull backend-1 backend-2
    
                                echo "ğŸš€ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í›„ ì»¨í…Œì´ë„ˆ ì‹¤í–‰"
                                export MYSQL_USERNAME="${MYSQL_USERNAME}"
                                export MYSQL_PASSWORD="${MYSQL_PASSWORD}"
                                export REDIS_PASSWORD="${REDIS_PASSWORD}"
                                export JWT_SECRET="${JWT_SECRET}"
                                export AWS_S3_ACCESS_KEY="${AWS_S3_ACCESS_KEY}" 
                                export AWS_S3_SECRET_KEY="${AWS_S3_SECRET_KEY}" 
    
                                echo "MYSQL_USERNAME=${MYSQL_USERNAME}" >> .env
                                echo "MYSQL_PASSWORD=${MYSQL_PASSWORD}" >> .env
                                echo "REDIS_PASSWORD=${REDIS_PASSWORD}" >> .env
                                echo "JWT_SECRET=${JWT_SECRET}" >> .env
                                echo "AWS_S3_ACCESS_KEY=${AWS_S3_ACCESS_KEY}" >> .env
                                echo "AWS_S3_SECRET_KEY=${AWS_S3_SECRET_KEY}" >> .env
                                
    
                                docker-compose down --remove-orphans
                                MYSQL_USERNAME=${MYSQL_USERNAME} \
                                MYSQL_PASSWORD=${MYSQL_PASSWORD} \
                                REDIS_PASSWORD=${REDIS_PASSWORD} \
                                JWT_SECRET=${JWT_SECRET} \
                                AWS_S3_ACCESS_KEY=${AWS_S3_ACCESS_KEY} \
                                AWS_S3_SECRET_KEY=${AWS_S3_SECRET_KEY} \
                                docker-compose up -d --force-recreate
    
                                echo "âœ… ë°°í¬ ì™„ë£Œ! í˜„ì¬ ì»¨í…Œì´ë„ˆ ìƒíƒœ:"
                                docker ps -a
                                exit 0
                                EOF
                                """
                            }
                        }
                    }
                }
            }
        }
        post {
            success {
                echo "âœ… Deployment Successful!"
                
                // GitLab ì»¤ë°‹ ê¸°ë¡ì—ì„œ ë°°í¬í•œ ì‚¬ëŒì˜ GitLab ì•„ì´ë”” ì¶”ì¶œ
                script {
                    def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                    def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                    def Name = Author_ID.substring(1)
    
                    // Mattermost ì•Œë¦¼ ì „ì†¡ (ë¹Œë“œ ì„±ê³µ ì‹œ)
                    mattermostSend(
                        color: 'good',
                        message: "${env.JOB_NAME}ì˜ Jenkins ${env.BUILD_NUMBER}ë²ˆì§¸ ë¹Œë“œê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤! \në°°í¬í•œ ì‚¬ëŒ: ${Name} ã…‹ã…‹ì¢€ì¹˜ë…¸ \në¸Œëœì¹˜: ${env.GIT_BRANCH} \n(<${env.BUILD_URL}|ìƒì„¸ ë³´ê¸°>)",
                        endpoint: "${env.MATTERMOST_WEBHOOK_URL}",
                        channel: "${env.MATTERMOST_CHANNEL}"
                    )
                }
            }
            failure {
                echo "âŒ Deployment Failed."
                
                script {
                    // GitLab ì»¤ë°‹ ê¸°ë¡ì—ì„œ ë°°í¬í•œ ì‚¬ëŒì˜ GitLab ì•„ì´ë”” ì¶”ì¶œ
                    def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                    def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                    def Name = Author_ID.substring(1)
    
                    // Mattermost ì•Œë¦¼ ì „ì†¡ (ë¹Œë“œ ì‹¤íŒ¨ ì‹œ)
                    mattermostSend(
                        color: 'danger',
                        message: "${env.JOB_NAME}ì˜ Jenkins ${env.BUILD_NUMBER}ë²ˆì§¸ ë¹Œë“œê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. \në°°í¬í•œ ì‚¬ëŒ: ${Name} ë­í•¨? \n${env.GIT_BRANCH}ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. \n(<${env.BUILD_URL}|ìƒì„¸ ë³´ê¸°>)",
                        endpoint: "${env.MATTERMOST_WEBHOOK_URL}",
                        channel: "${env.MATTERMOST_CHANNEL}"
                    )
                }
            }
        }
    }
    
    ```
    
    ### Nginx ë° SSL ì¸ì¦ ì„¤ì •
    
    1. **Nginx ë° cerbot ì„¤ì¹˜ (SSL ì ìš©í•  ë•Œ)**
        
        ```json
        sudo apt update
        sudo apt install -y nginx certbot python3-certbot-nginx
        sudo systemctl start nginx
        sudo systemctl enable nginx
        ```
        
    2. **SSL ì¸ì¦ì„œ ë°œê¸‰**
        
        ```json
        sudo certbot --nginx -d your-domain.com -d www.your-domain.com
        sudo certbot --nginx -d j12d105.p.ssafy.io -d www.j12d105.p.ssafy.io
        ```
        
    3. **Nginx ì„¤ì • (ì˜ˆì‹œ: `/j12d105/nginx/nginx.conf`)**
    
    ```bash
    worker_processes auto;
    
    events {
        worker_connections 1024;
    }
    
    http {
        # ë¡œê·¸ í¬ë§· ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ
        log_format custom '$remote_addr - $remote_user [$time_local] "$request" '
                           '$status $body_bytes_sent "$http_referer" '
                           '"$http_user_agent" "$http_x_forwarded_for" '
                           '"$request_time" "$upstream_response_time" "$pipe"';
         # ê¸°ë³¸ ì•¡ì„¸ìŠ¤ ë¡œê·¸ ì„¤ì •
        access_log /var/log/nginx/access.log custom;
    
        # ì—ëŸ¬ ë¡œê·¸ë¥¼ debug ë ˆë²¨ë¡œ ì„¤ì •
        error_log /var/log/nginx/error.log debug;
        # WebSocket ì—°ê²°ì„ ìœ„í•´ ì—…ê·¸ë ˆì´ë“œ í—¤ë” ì„¤ì •
        map $http_upgrade $connection_upgrade {
            default upgrade;
            ''      close;
        }
    
        include /etc/nginx/mime.types;
    
        # âœ… ë°±ì—”ë“œ ë¡œë“œ ë°¸ëŸ°ì‹± ì„¤ì •
        upstream backend_servers {
            least_conn;
            server backend-1:8090;
            server backend-2:8090;
        }
    
        # âœ… SSE(Server-Sent Events) ì„œë²„ (IP í•´ì‹œ ê¸°ë°˜ ë¼ìš°íŒ…)
        upstream sse_servers {
            ip_hash;
            server backend-1:8090;
            server backend-2:8090;
        }
    
        # âœ… HTTP â†’ HTTPS ìë™ ë¦¬ë””ë ‰ì…˜
        server {
            listen 15080;
            server_name j12d105.p.ssafy.io;
            return 301 https://$host$request_uri;
        }
        map $scheme $cookie_flag {
        https "secure; HttpOnly; SameSite=Strict";
        default "HttpOnly; SameSite=Lax";
    }
        # âœ… í”„ë¡ íŠ¸ + ë°±ì—”ë“œ + FastAPI HTTPS ì ìš©
        server {
            listen [::]:443 ssl ipv6only=on;
            listen 443 ssl;
            server_name j12d105.p.ssafy.io;
    
            client_max_body_size 1024M;
    
            ssl_certificate /etc/letsencrypt/live/j12d105.p.ssafy.io/fullchain.pem;
            ssl_certificate_key /etc/letsencrypt/live/j12d105.p.ssafy.io/privkey.pem;
            include /etc/letsencrypt/options-ssl-nginx.conf;
            ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
    
            # âœ… í”„ë¡ íŠ¸ì—”ë“œ ì •ì  íŒŒì¼ ì œê³µ
            location / {
                root /usr/share/nginx/html;
                index index.html;
                try_files $uri /index.html;
    
                add_header Cache-Control "no-cache, no-store, must-revalidate";
                add_header Pragma "no-cache";
                add_header Expires 0;
            }
    
            # âœ… ë°±ì—”ë“œ API í”„ë¡ì‹œ ì„¤ì • (ë¡œë“œ ë°¸ëŸ°ì‹±)
            location /api/ {
                proxy_pass http://backend_servers;
                proxy_http_version 1.1;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_cookie_domain localhost j12d105.p.ssafy.io;
    
                        # ë„ë©”ì¸ ì„¤ì •
                proxy_cookie_domain localhost j12d105.p.ssafy.io;
    
                # ë™ì ìœ¼ë¡œ ì¿ í‚¤ ì†ì„± ì„¤ì •
                proxy_cookie_path / "/; $cookie_flag";
    
            }
    
            # âœ… SSE ìš”ì²­ í”„ë¡ì‹œ
            location /api/sse/ {
                rewrite ^/api/sse/(.*)$ /$1 break;
                proxy_pass http://sse_servers;
                proxy_http_version 1.1;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_buffering off;
            }
    
            #
            location /audio {
                proxy_pass https://classic-badly-reindeer.ngrok-free.app;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "Upgrade";
                proxy_set_header Host classic-badly-reindeer.ngrok-free.app;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_cache_bypass $http_upgrade;
                proxy_redirect off;
                proxy_ssl_verify off;
                proxy_ssl_server_name on;
                proxy_ssl_name classic-badly-reindeer.ngrok-free.app;
    
            }
    
            location /ws {
                proxy_pass https://classic-badly-reindeer.ngrok-free.app/ws;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "Upgrade";
                proxy_set_header Host classic-badly-reindeer.ngrok-free.app;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_cache_bypass $http_upgrade;
                proxy_redirect off;
                proxy_ssl_verify off;
                proxy_ssl_server_name on;
                proxy_ssl_name classic-badly-reindeer.ngrok-free.app;
        }
    
            # Swagger UI í”„ë¡ì‹œ ì„¤ì •
            location /api/swagger-ui/ {
                    allow all;
                    proxy_pass http://backend_servers;
                    proxy_set_header Host $host;
                    proxy_set_header X-Real-IP $remote_addr;
                    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                    proxy_set_header X-Forwarded-Proto $scheme;
    
                    # Swagger UIì—ì„œ ìš”ì²­í•˜ëŠ” ëª¨ë“  ìì›ì— ëŒ€í•´ì„œë„ í”„ë¡ì‹œ
                    rewrite ^/api/swagger-ui/(.*)$ /$1 break;
            }
    
            error_page 404 =200 /index.html;
        }
    }
    
    ```
    
    1. **SSL ì¸ì¦ì„œ ë°œê¸‰ (Certbot ì‚¬ìš©)**
        
        ```bash
        
        sudo apt-get update
        sudo apt-get upgrade
        sudo apt-get install python3-certbot-nginx
        sudo certbot certonly --nginx -d i12d105.p.ssafy.io
        
        ```
        
    
    ---
    

### ë°°í¬ ì‹œ íŠ¹ì´ì‚¬í•­

- ì˜ìƒ aiì˜ ì¸ì‹ ì†ë„ë¥¼ ìœ„í•´ ë¡œì»¬ ì„œë²„ì—ì„œ ë°°í¬í•˜ì—¬ ê³µê°œì„œë²„ë¡œ ì „í™˜í•˜ì—¬ ë°°í¬í•˜ì˜€ìŒ.
- uvicornìœ¼ë¡œ ë°°í¬ í›„ ngrokìœ¼ë¡œ ê³µê°œì„œë²„ë¡œ ì „í™˜
- í•´ë‹¹ ì„œë²„ nginx.confì—ì„œ ì‘ì„±

```bash
ngrok authtoken {ì¸ì¦í‚¤}
```